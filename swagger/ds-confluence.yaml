---
swagger: '2.0'
info:
  title: Confluence data source
  version: '1.0'
  description: Confluence data source V2
paths:
  /noop:
    get:
      description: no-op
      responses:
        200:
          description: Success
definitions:
  DataSource:
    type: object
    properties:
      Slug:
        type: string
        example: confluence
      Name:
        type: string
        example: Confluence
  DataSourceInstance:
    type: object
    properties:
      Slug:
        type: string
        example: confluence
      Endpoint:
        type: string
        example: https://wiki.lfnetworking.org
      Id:
        type: string
        example: 1234567890abcdef
      User:
        type: string
        x-nullable: true
        example: myUserName
      Token:
        type: string
        x-nullable: true
        example: token-value
  Metadata:
    type: object
    properties:
      BackendName:
        type: string
        example: ds-confluence
      BackendVersion:
        type: string
        example: v0.1.0
      Tags:
        type: array
        items:
          type: string
          example: my-tag
  DocumentType:
    type: object
    properties:
      Id:
        type: string
        example: 1234567890abcdef
      Type:
        type: string
        example: Confluence page
  Documentation:
    type: object
    properties:
      Id:
        type: string
        example: 1234567890abcdef
        description: PK - up to 50 chars
      createdAt:
        type: string
        format: date-time
        example: '2019-09-02 03:00:33.000000'
      updatedAt:
        type: string
        format: date-time
        example: '2019-09-02 03:00:33.000000'
      dataSourceId:
        type: string
        example: confluence
        description: data source type slug (FK)
      dataSourceInstanceId:
        type: string
        example: 1234567890abcdef
        description: data source instance id (FK)
      documentTypeId:
        type: string
        example: 1234567890abcdef
        description: document type id (FK)
      Slug:
        type: string
        example: cncf/k8s
        description: Slug points to project (FK), we don't store project data here, project data comes from onboarding
  Event:
    type: object
    properties:
      Documentation:
        type: object
        $ref: "#/definitions/Documentation"
  SharedData:
    type: object
    description: some shared objects, like document types - to avoid repeating entire objects in each event
    properties:
      DocumentTypes:
        type: array
        items:
          $ref: "#/definitions/DocumentType"
  Data:
    type: object
    properties:
      DataSource:
        type: object
        $ref: "#/definitions/DataSource"
      DataSourceInstance:
        type: object
        $ref: "#/definitions/DataSourceInstance"
      MetaData:
        type: object
        $ref: "#/definitions/Metadata"
      Events:
        type: array
        items:
          $ref: "#/definitions/Event"
      SharedData:
        type: object
        $ref: "#/definitions/SharedData"
