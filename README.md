# ds-confluence
Confluence data source V2

- run `make swagger` to generate models.
- run `make` to build app.
- run `./scripts/example_run.sh` to try it.
- example [JSON](https://github.com/LF-Engineering/insights-datasource-confluence/blob/main/exampleOutput.json) generated by this tool:
```
{
  "DataSource": {
    "Name": "Confluence",
    "Slug": "confluence"
  },
  "Events": [
    {
      "DocumentActivity": {
        "Body": "",
        "CreatedAt": "2021-07-16T13:58:41.000Z",
        "DocumentActivityType": "confluence_attachment",
        "Documentation": {
          "Ancestors": null,
          "CreatedAt": "0001-01-01T00:00:00.000Z",
          "DataSourceId": "confluence",
          "DocumentType": "confluence_attachment",
          "DocumentVersion": "1",
          "Id": "b9f5a4fdff3184330add296e60495e0ce3f2f429",
          "InternalId": "56068401",
          "Slug": "Kubernetes",
          "Space": "LN",
          "Title": "LFN MAC Messaging 071521.pptx",
          "URL": "https://wiki.lfnetworking.org/display/LN/2021+LFN+Messaging+Workshop+071521?preview=%2F56068400%2F56068401%2FLFN+MAC+Messaging+071521.pptx",
          "UpdatedAt": "2021-07-16T13:58:41.000Z"
        },
        "Id": "d880578c8e9a3bb5703c214ef6d85ab7138fcc8e",
        "Identity": {
          "AvatarURL": "https://wiki.lfnetworking.org/images/icons/profilepics/default.svg",
          "DataSourceId": "confluence",
          "Id": "585031a280339d47ca0e17d3c7d5050222db7bd2",
          "Name": "Brandon Wick",
          "Username": "Bwick"
        }
      }
    },
    {
      "DocumentActivity": {
        "Body": "<p><ac:link><ri:user ri:userkey=\"ff808081671713e801679bdd7d130017\" /></ac:link> Some of the information in this is technically untrue.&nbsp; It currently is possible to add and deploy new workflows in runtime, there are actually 2 different ways this can be done and I have personally done.&nbsp; I do agree that there is currently no way to add new code/classes in runtime - i have been exploring a solution to this as well.</p>",
        "CreatedAt": "2021-07-02T17:02:42.000Z",
        "DocumentActivityType": "confluence_comment",
        "Documentation": {
          "Ancestors": null,
          "CreatedAt": "0001-01-01T00:00:00.000Z",
          "DataSourceId": "confluence",
          "DocumentType": "confluence_comment",
          "DocumentVersion": "2",
          "Id": "408d49177b6a70d140da22f544c5ac0ace91c8cc",
          "InternalId": "56068159",
          "Slug": "Kubernetes",
          "Space": "LN",
          "Title": "Re: 2021-06-09 - ONAP: SO Custom Workflow Onboarding and Orchestration",
          "URL": "https://wiki.lfnetworking.org/display/LN/2021-06-09+-+ONAP%3A+SO+Custom+Workflow+Onboarding+and+Orchestration?focusedCommentId=56068159#comment-56068159",
          "UpdatedAt": "2021-07-02T17:02:42.000Z"
        },
        "Id": "52954e515d5ff88dbeff895c39a8b57a709a3d75",
        "Identity": {
          "AvatarURL": "https://wiki.lfnetworking.org/images/icons/profilepics/default.svg",
          "DataSourceId": "confluence",
          "Id": "2244ad1f976ac81365ea8e433c2474060aac81e9",
          "Name": "Cory Boslet",
          "Username": "cb645j"
        }
      }
    },
    {
      "DocumentActivity": {
        "Body": "",
        "CreatedAt": "2021-08-03T15:16:59.000Z",
        "DocumentActivityType": "confluence_attachment",
        "Documentation": {
          "Ancestors": null,
          "CreatedAt": "0001-01-01T00:00:00.000Z",
          "DataSourceId": "confluence",
          "DocumentType": "confluence_attachment",
          "DocumentVersion": "1",
          "Id": "262adae0310e881ae7f2b1ddb707998a2710da8f",
          "InternalId": "60457135",
          "Slug": "Kubernetes",
          "Space": "LN",
          "Title": "euag-2021-08-03.mp4",
          "URL": "https://wiki.lfnetworking.org/display/LN/EUAG+Meeting+Recordings?preview=%2F10551988%2F60457135%2Feuag-2021-08-03.mp4",
          "UpdatedAt": "2021-08-03T15:16:59.000Z"
        },
        "Id": "b0eca693cc9469dd25f4c1e5c3ad7d3a748193a5",
        "Identity": {
          "AvatarURL": "https://wiki.lfnetworking.org/download/attachments/327931/user-avatar",
          "DataSourceId": "confluence",
          "Id": "8b1cc64a86aacab7a69c92ebd70ba068a97a05e4",
          "Name": "Kenny Paul",
          "Username": "KennyPaul"
        }
      }
    },
    {
      "DocumentActivity": {
        "Body": "",
        "CreatedAt": "2021-07-20T09:35:56.000Z",
        "DocumentActivityType": "confluence_attachment",
        "Documentation": {
          "Ancestors": null,
          "CreatedAt": "0001-01-01T00:00:00.000Z",
          "DataSourceId": "confluence",
          "DocumentType": "confluence_attachment",
          "DocumentVersion": "2",
          "Id": "4ee95b5fd82dbf66d1337b7e9d365061db30c1a0",
          "InternalId": "56068190",
          "Slug": "Kubernetes",
          "Space": "LN",
          "Title": "Intelligent Networking White Paper_v3.1_DRAFT.docx",
          "URL": "https://wiki.lfnetworking.org/pages/viewpage.action?pageId=56067017&preview=%2F56067017%2F56068190%2FIntelligent+Networking+White+Paper_v3.1_DRAFT.docx",
          "UpdatedAt": "2021-07-20T09:35:56.000Z"
        },
        "Id": "4123b8ccd2f02cd4c411f12557307cd5f37c65f2",
        "Identity": {
          "AvatarURL": "https://wiki.lfnetworking.org/images/icons/profilepics/default.svg",
          "DataSourceId": "confluence",
          "Id": "35c85e608c7b2456bc6bcd8c3f60fe74fab4d3b3",
          "Name": "Yuhan Zhang",
          "Username": "yuhanzhang"
        }
      }
    },
    {
      "DocumentActivity": {
        "Body": "<h1><a href=\"https://www.lfnetworking.org/about/governance/board/\">GB Member Roster</a></h1><p><br /></p><p>The LFN GB is comprised of:</p><ul><li>A representative from all Platinum Member companies</li><li>An elected representative for every 3 Gold Member companies</li><li>An elected representative from the Silver Member companies</li><li>A Committer representative elected by the LFN community at large</li><li>The TAC Chair</li><li>The MAC Chair (non-voting seat)</li></ul><p><br /></p>",
        "CreatedAt": "2021-07-21T15:47:57.000Z",
        "DocumentActivityType": "confluence_page",
        "Documentation": {
          "Ancestors": [
            {
              "InternalId": "327683",
              "Title": "LF Networking Wiki",
              "URL": "https://wiki.lfnetworking.org/display/LN/LF+Networking+Wiki"
            },
            {
              "InternalId": "46105890",
              "Title": "Special, Select, and Other Committees",
              "URL": "https://wiki.lfnetworking.org/display/LN/Special%2C+Select%2C+and+Other+Committees"
            }
          ],
          "CreatedAt": "0001-01-01T00:00:00.000Z",
          "DataSourceId": "confluence",
          "DocumentType": "confluence_page",
          "DocumentVersion": "2",
          "Id": "e00ff98ea9062d8f6ecd909d6be4ee168aad7606",
          "InternalId": "52003094",
          "Slug": "Kubernetes",
          "Space": "LN",
          "Title": "About The LFN Governing Board",
          "URL": "https://wiki.lfnetworking.org/display/LN/About+The+LFN+Governing+Board",
          "UpdatedAt": "2021-07-21T15:47:57.000Z"
        },
        "Id": "0397804fb432acf6acd11545491c86148da30956",
        "Identity": {
          "AvatarURL": "https://wiki.lfnetworking.org/download/attachments/327931/user-avatar",
          "DataSourceId": "confluence",
          "Id": "8b1cc64a86aacab7a69c92ebd70ba068a97a05e4",
          "Name": "Kenny Paul",
          "Username": "KennyPaul"
        }
      }
    },
    {
      "DocumentActivity": {
        "Body": "",
        "CreatedAt": "2021-07-06T09:00:55.000Z",
        "DocumentActivityType": "confluence_attachment",
        "Documentation": {
          "Ancestors": null,
          "CreatedAt": "0001-01-01T00:00:00.000Z",
          "DataSourceId": "confluence",
          "DocumentType": "confluence_attachment",
          "DocumentVersion": "1",
          "Id": "4ee95b5fd82dbf66d1337b7e9d365061db30c1a0",
          "InternalId": "56068190",
          "Slug": "Kubernetes",
          "Space": "LN",
          "Title": "Intelligent Networking White Paper_v3.1_DRAFT.docx",
          "URL": "https://wiki.lfnetworking.org/pages/viewpage.action?pageId=56067017&preview=%2F56067017%2F56068190%2FIntelligent+Networking+White+Paper_v3.1_DRAFT.docx",
          "UpdatedAt": "2021-07-06T09:00:55.000Z"
        },
        "Id": "fcd0e62713628306238bf2cd9ee2c96c374b9a69",
        "Identity": {
          "AvatarURL": "https://wiki.lfnetworking.org/images/icons/profilepics/default.svg",
          "DataSourceId": "confluence",
          "Id": "35c85e608c7b2456bc6bcd8c3f60fe74fab4d3b3",
          "Name": "Yuhan Zhang",
          "Username": "yuhanzhang"
        }
      }
    },
    {
      "DocumentActivity": {
        "Body": "<p><strong>Supporting Documents</strong></p><p><a href=\"https://docs.google.com/presentation/d/1ee-fh-7NaYl0379Kyro2IwJ91pM1hBsRZlhdpWjVTvY/edit?usp=sharing\">Latest&nbsp;Slide Presentation</a></p><p><strong>Attendees</strong></p><p><ac:link><ri:user ri:userkey=\"ff80808161437b2901621c41c09e0061\" /><ac:plain-text-link-body><![CDATA[Brandon Wick]]></ac:plain-text-link-body></ac:link>&nbsp;<ac:link><ri:user ri:userkey=\"ff8080816a2c952c016bb30334c7007b\" /><ac:plain-text-link-body><![CDATA[Jill Lovato]]></ac:plain-text-link-body></ac:link><span>&nbsp;<ac:link><ri:user ri:userkey=\"ff80808162a3218d0162feb42a6c0003\" /><ac:plain-text-link-body><![CDATA[Heather Kirksey]]></ac:plain-text-link-body></ac:link>&nbsp;</span><span>&nbsp;<ac:link><ri:user ri:userkey=\"ff80808161437b29016277b84f12008b\" /><ac:plain-text-link-body><![CDATA[Ranny Haiby]]></ac:plain-text-link-body></ac:link>&nbsp;<ac:link><ri:user ri:userkey=\"ff8080816a2c952c016b776a923e0074\" /><ac:plain-text-link-body><![CDATA[Bob Monkman]]></ac:plain-text-link-body></ac:link>&nbsp;</span>Neal Hartsell&nbsp;<ac:link><ri:user ri:userkey=\"ff80808178e71f9301798018c0ec0049\" /><ac:plain-text-link-body><![CDATA[Sandeep Panesar]]></ac:plain-text-link-body></ac:link>&nbsp;<ac:link><ri:user ri:userkey=\"ff80808175088ea801770202bfe80064\" /></ac:link>&nbsp;</p><p>##########################</p><p>This was the initial kick off meeting for the LFN Strategy Working Group.</p><p>Brandon prepared and presented the a <a href=\"https://docs.google.com/presentation/d/1ee-fh-7NaYl0379Kyro2IwJ91pM1hBsRZlhdpWjVTvY/edit?usp=sharing\">Strategy Overview Deck</a> to set the context for the discussion.</p><p>The open discussion centered around the following points:</p><ul><li><span>Central Ideas</span></li><ul><li><span>How to make this exciting? Enterprise, etc.</span></li><li><span>Enterprise Sizing (very large accounts vs. smaller ones)</span></li><ul><li><span>What are we actually trying to accomplish? (ties back to biz dev convos)</span></li><li><span>&ldquo;Enterprise&rdquo; a vague term, need to specify focus.</span></li><li><span>Determine the sandbox is we&rsquo;re playing, what we&rsquo;re going to do (and NOT do)</span></li><li><span>Smaller orgs move faster, very innovative</span></li><li><span>CNCF marketing example: Enterprise Vendors (target), enterprise end users. Ecosystem message vs technology message.</span></li><li><span>Magma Core Example &ldquo;Bringing connectivey to 3rd world&rdquo;</span></li><li><span>Alignment with the SPC (Both should align to board priorities) Synch with Jonne</span></li></ul><li><span>5G SBP &rarr; Are we focusing on Telecom (ONAP/Magma/Anuket)?</span></li><ul><li><span>5G SBP Targeting &ldquo;Private 5G (LTE, eventually IoT)&rdquo;</span></li><li><span>Evolution to xSP: Traditional, Regional, Cloud Services</span></li></ul><li><span>Deployments: Enterprise: &ldquo;Show how this works in my environment&rdquo; Can we solicit members to build these PoCs? Version streaming </span></li></ul></ul><p><span>Group members are asked to add any additional comments, questions, and ideas to this wiki page.&nbsp;</span></p><p>The group agreed to meet bi-weekly for the near future (and can be updated to weekly when/if needed).&nbsp;</p><p>Additional MAC members are encouraged to join the group at anytime, please email&nbsp;<a href=\"mailto:bwick@linucfoundation.org.\">bwick@linucfoundation.org.</a>&nbsp;</p><p><br /></p>",
        "CreatedAt": "2021-08-06T15:38:23.000Z",
        "DocumentActivityType": "confluence_new_page",
        "Documentation": {
          "Ancestors": [
            {
              "InternalId": "327683",
              "Title": "LF Networking Wiki",
              "URL": "https://wiki.lfnetworking.org/display/LN/LF+Networking+Wiki"
            },
            {
              "InternalId": "327912",
              "Title": "Marketing Advisory Council (MAC)",
              "URL": "https://wiki.lfnetworking.org/pages/viewpage.action?pageId=327912"
            }
          ],
          "CreatedAt": "2021-08-06T15:38:23.000Z",
          "DataSourceId": "confluence",
          "DocumentType": "confluence_page",
          "DocumentVersion": "1",
          "Id": "8005d7f9aaf9986d0af6ab7d9db721028b1e348c",
          "InternalId": "60457181",
          "Slug": "Kubernetes",
          "Space": "LN",
          "Title": "2021 LFN Strategy Workshop 080621",
          "URL": "https://wiki.lfnetworking.org/display/LN/2021+LFN+Strategy+Workshop+080621",
          "UpdatedAt": "2021-08-06T15:38:23.000Z"
        },
        "Id": "7f154c3d1f23a40a3ff548c42969e68c790c9bec",
        "Identity": {
          "AvatarURL": "https://wiki.lfnetworking.org/images/icons/profilepics/default.svg",
          "DataSourceId": "confluence",
          "Id": "585031a280339d47ca0e17d3c7d5050222db7bd2",
          "Name": "Brandon Wick",
          "Username": "Bwick"
        }
      }
    },
    {
      "DocumentActivity": {
        "Body": "<p>Some of the information in this is technically untrue.&nbsp; It currently is possible to add and deploy new workflows in runtime, there are actually 2 different ways this can be done and I have personally done.&nbsp; I do agree that there is currently no way to add new code/classes in runtime - i have been exploring a solution to this as well.</p>",
        "CreatedAt": "2021-07-02T17:01:58.000Z",
        "DocumentActivityType": "confluence_comment",
        "Documentation": {
          "Ancestors": null,
          "CreatedAt": "0001-01-01T00:00:00.000Z",
          "DataSourceId": "confluence",
          "DocumentType": "confluence_comment",
          "DocumentVersion": "1",
          "Id": "408d49177b6a70d140da22f544c5ac0ace91c8cc",
          "InternalId": "56068159",
          "Slug": "Kubernetes",
          "Space": "LN",
          "Title": "Re: 2021-06-09 - ONAP: SO Custom Workflow Onboarding and Orchestration",
          "URL": "https://wiki.lfnetworking.org/display/LN/2021-06-09+-+ONAP%3A+SO+Custom+Workflow+Onboarding+and+Orchestration?focusedCommentId=56068159#comment-56068159",
          "UpdatedAt": "2021-07-02T17:01:58.000Z"
        },
        "Id": "a13fd430ca23a9d60e8062cb56e2c0c1321f6a48",
        "Identity": {
          "AvatarURL": "https://wiki.lfnetworking.org/images/icons/profilepics/default.svg",
          "DataSourceId": "confluence",
          "Id": "2244ad1f976ac81365ea8e433c2474060aac81e9",
          "Name": "Cory Boslet",
          "Username": "cb645j"
        }
      }
    },
    {
      "DocumentActivity": {
        "Body": "",
        "CreatedAt": "2021-08-11T02:25:46.000Z",
        "DocumentActivityType": "confluence_attachment",
        "Documentation": {
          "Ancestors": null,
          "CreatedAt": "0001-01-01T00:00:00.000Z",
          "DataSourceId": "confluence",
          "DocumentType": "confluence_attachment",
          "DocumentVersion": "1",
          "Id": "5bbb97bf5c9c1275c7d83aad7f59c0fc9737cc27",
          "InternalId": "60457266",
          "Slug": "Kubernetes",
          "Space": "LN",
          "Title": "VCO3.0-topology.png",
          "URL": "https://wiki.lfnetworking.org/pages/viewpage.action?pageId=60457212&preview=%2F60457212%2F60457266%2FVCO3.0-topology.png",
          "UpdatedAt": "2021-08-11T02:25:46.000Z"
        },
        "Id": "41d49a28ab1605524507e0522a755873d65aa879",
        "Identity": {
          "AvatarURL": "https://wiki.lfnetworking.org/images/icons/profilepics/default.svg",
          "DataSourceId": "confluence",
          "Id": "585031a280339d47ca0e17d3c7d5050222db7bd2",
          "Name": "Brandon Wick",
          "Username": "Bwick"
        }
      }
    },
    {
      "DocumentActivity": {
        "Body": "",
        "CreatedAt": "2021-08-11T02:27:32.000Z",
        "DocumentActivityType": "confluence_attachment",
        "Documentation": {
          "Ancestors": null,
          "CreatedAt": "0001-01-01T00:00:00.000Z",
          "DataSourceId": "confluence",
          "DocumentType": "confluence_attachment",
          "DocumentVersion": "1",
          "Id": "845b2efe61db6adde14e173554814d35e86740a4",
          "InternalId": "60457269",
          "Slug": "Kubernetes",
          "Space": "LN",
          "Title": "VCO3.0-topology.png",
          "URL": "https://wiki.lfnetworking.org/display/LN/5G+Cloud+Native+Network+Demo+Diagram?preview=%2F60457268%2F60457269%2FVCO3.0-topology.png",
          "UpdatedAt": "2021-08-11T02:27:32.000Z"
        },
        "Id": "6367d6a0e27cd8cb00ae18a2902d1a34eda0d9f6",
        "Identity": {
          "AvatarURL": "https://wiki.lfnetworking.org/images/icons/profilepics/default.svg",
          "DataSourceId": "confluence",
          "Id": "585031a280339d47ca0e17d3c7d5050222db7bd2",
          "Name": "Brandon Wick",
          "Username": "Bwick"
        }
      }
    }
  ],
  "MetaData": {
    "BackendName": "confluence",
    "BackendVersion": "0.1.0",
    "Project": "Kubernetes",
    "Tags": [
      "a",
      "b",
      "c",
      "d",
      "e"
    ]
  }
}
```
